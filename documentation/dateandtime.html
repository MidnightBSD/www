<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>MidnightBSD Documentation - Date and Time</title>
    <link rel="shortcut icon" href="/favicon.ico" />
    <link rel="stylesheet" type="text/css" href="../css/essence.css">
    <link rel="canonical" href="https://www.midnightbsd.org/documentation/dateandtime.html">
</head>
<body>
<div id="globe">
    <div id="header"><h1 title="MidnightBSD Home"><a href="../" title="MidnightBSD Home">MidnightBSD: The BSD For Everyone</a></h1></div>
    <!--#include virtual="/menu.html"-->
    <div class="clear"></div>
    <div id="text">
        <h2><img src="../images/oxygen/doc32.png" alt="" /> Date and Time</h2>
        <div id="toc">
            <h3>Contents</h3>
            <ul>
                <li><a href="#s1b">Timezone configuration</a></li>
                <li><a href="#s1c">Override timezone in local shell</a></li>
                <li><a href="#s1d">System clock</a></li>
                <li><a href="#s1e">Set the date manually</a></li>
                <li><a href="#s1f">Network Time</a></li>
                <li><a href="index.html"><strong>Documentation</strong></a></li>
            </ul>
        </div>

        <h3 id="s1b">Timezone configuration</h3>

        <p>The easy way to do this after installation is through the tzsetup utility. It will guide you to select the correct timezone.

        <p>The /etc/localtime file should contain the appropriate timezone. You can find a file manually from /usr/share/zoneinfo and copy it there to set the timezone manually.

        <p>Run adjkerntz -a or reboot to take effect.

        <h3 id="s1c">Override timezone in local shell</h3>

       <p><code>export TZ=America/Los_Angeles date</code>

        <h3 id="s1d">System clock</h3>

        <p>The system clock can be set to localtime or UTC. If it's utc, you want to create an empty file <code>touch /etc/wall_cmos_clock</code>

        <p>If it's local time, remove that file.

        <p>If you are consistently off by your timezone offset at boot, this is likey why! NOTE: Bhyve VMs default to UTC so you need this file!

        <h3 id="s1e">Set the date manually</h3>

        Format is date yymmddhhMM.ss

        Set time to 3:30PM <code>date 1530</code>

        <h3 id="s1f">Network Time</h3>

        <p>OpenNTPD is included in the base system. Turn it on with
        sysrc ntpd_enable=YES service ntpd start

        <p>it will default to a random pool of servers. Edit <code>/etc/ntpd.conf</code> to tweak this</p>

        <p>Alternatively, you can install a more precise daemon</p>

        <p><code>mport install ntp</code></p>

        <p><code>sysrc ntp_enable=YES</code></p>

        <p><code>vi /usr/local/etc/ntp.conf</code></p>

        <p><code>service ntp start</code></p>


            <!--#include virtual="/disqus.html"-->
    </div>
    <!--#include virtual="/footer.html"-->
</body>
</html>
